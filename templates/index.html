<!DOCTYPE html>
<html>
<head>
  <title>Rainwater Predictor</title>
</head>
<body>
  <h2>Rainwater Harvesting Calculator</h2>
  <input id="roof_area" placeholder="Roof Area (m²)">
  <input id="rainfall" placeholder="Rainfall (mm)">
  <input id="runoff" placeholder="Runoff Coefficient">
  <button onclick="getPrediction()">Predict</button>
  <p id="result"></p>

  <script>
    async function getPrediction() {
      let data = {
        roof_area: parseFloat(document.getElementById("roof_area").value),
        rainfall: parseFloat(document.getElementById("rainfall").value),
        runoff: parseFloat(document.getElementById("runoff").value)
      };

      try {
        // ✅ Change here: call the Render backend /predict route
        let response = await fetch("https://modeldeployment-oqt8.onrender.com/predict", {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(data)
        });

        let result = await response.json();

        if (result.predicted_water_liters !== undefined) {
          document.getElementById("result").innerText =
            "Predicted Water Collected: " + result.predicted_water_liters + " liters";
        } else if (result.error) {
          document.getElementById("result").innerText =
            "Error: " + result.error;
        } else {
          document.getElementById("result").innerText = "Unknown error occurred";
        }

      } catch (err) {
        document.getElementById("result").innerText = "Error: " + err;
      }
    }
  </script>
</body>
</html>
